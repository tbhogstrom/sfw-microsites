---
/**
 * FormTextarea.astro - Multi-line text input field
 * Textarea component with validation styling
 */
import type { BaseProps } from '@sfw/ui/types';

export interface Props extends BaseProps {
  name: string;
  label: string;
  placeholder?: string;
  required?: boolean;
  disabled?: boolean;
  value?: string;
  error?: string;
  helpText?: string;
  rows?: number;
}

const {
  name,
  label,
  placeholder,
  required = false,
  disabled = false,
  value,
  error,
  helpText,
  rows = 4,
  class: className = '',
  ...rest
} = Astro.props;

const textareaClasses = [
  'w-full px-4 py-3 border rounded-lg transition-colors resize-y',
  'focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent',
  error ? 'border-red-500' : 'border-gray-300',
  disabled && 'bg-gray-100 cursor-not-allowed',
  className,
].filter(Boolean).join(' ');
---

<div class="mb-4">
  <label for={name} class="block text-sm font-medium text-gray-700 mb-2">
    {label}
    {required && <span class="text-red-500 ml-1">*</span>}
  </label>

  <textarea
    id={name}
    name={name}
    placeholder={placeholder}
    required={required}
    disabled={disabled}
    rows={rows}
    class={textareaClasses}
    aria-describedby={error ? `${name}-error` : helpText ? `${name}-help` : undefined}
    aria-invalid={error ? 'true' : 'false'}
    {...rest}
  >{value}</textarea>

  {error && (
    <p id={`${name}-error`} class="mt-1 text-sm text-red-600">
      {error}
    </p>
  )}

  {helpText && !error && (
    <p id={`${name}-help`} class="mt-1 text-sm text-gray-500">
      {helpText}
    </p>
  )}
</div>
