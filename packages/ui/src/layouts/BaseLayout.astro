---
/**
 * BaseLayout.astro - Base page layout
 * Wraps all pages with SEO, header, footer, and mobile nav
 */
import type { SiteConfig, NavigationItem } from '@sfw/ui/types';
import Analytics from '@vercel/analytics/astro';
import SEO from '../components/ui/SEO.astro';
import Header from '../components/layout/Header.astro';
import Footer from '../components/layout/Footer.astro';
import MobileNav from '../components/layout/MobileNav.astro';
import CCBBanner from '../components/layout/CCBBanner.astro';

export interface Props {
  title: string;
  description: string;
  config: SiteConfig;
  navigation?: NavigationItem[];
  logo?: string;
  canonical?: string;
  ogImage?: string;
  ogType?: 'website' | 'article';
  noindex?: boolean;
  transparentHeader?: boolean;
  showFooter?: boolean;
}

const {
  title,
  description,
  config,
  navigation = [],
  logo,
  canonical,
  ogImage,
  ogType,
  noindex,
  transparentHeader = false,
  showFooter = true,
} = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <SEO
      title={title}
      description={description}
      config={config}
      canonical={canonical}
      ogImage={ogImage}
      ogType={ogType}
      noindex={noindex}
    />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-933656781"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-933656781');
    </script>
  </head>
  <body class="font-body text-dark antialiased">
    <Header
      config={config}
      navigation={navigation}
      logo={logo}
      transparent={transparentHeader}
    />

    <MobileNav config={config} navigation={navigation} />

    <main id="main-content">
      <slot />
    </main>

    {showFooter && (
      <>
        <CCBBanner dbaName={config.name} />
        <Footer config={config} navigation={navigation} />
      </>
    )}

    <Analytics />
  </body>
</html>
